<!doctype html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="../resources/img/logo/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1:1문의 - 간호조무사협회</title>

    <!-- css -->
    <link rel="stylesheet" href="../resources/krds/css/plugin/swiper-bundle.min.css">
    <link rel="stylesheet" href="../resources/krds/css/component/output.css" />
    <link rel="stylesheet" href="../resources/krds/css/pattern/p_layout.css" />
    <link rel="stylesheet" href="../resources/css/style.css" />

    <!--js-->
    <script src="../resources/js/jquery-3.7.1.min.js"></script>
    <script src="../resources/krds/js/plugin/swiper-bundle.min.js"></script>
    <script src="../resources/krds/js/component/ui-script.js" defer></script>
    <script src="../resources/krds/js/pattern/pattern.js" defer></script>
    <script src="../resources/js/script.js"></script>
</head>

<body>
    <div id="wrap">
        <!-- 퍼블리싱단 header는 여기로 바로 삽입됨 -->


        <!-- 컨테이너 영역 -->
        <div id="container">
            <!-- 컨텐츠 영역 -->
            <div class="inner in-between">
                <!-- 사이드 메뉴 -->
                <nav class="krds-side-navigation">
                    <h1 class="lnb-tit">메뉴</h1>
                    <!-- lnb-list -->
                    <ul class="lnb-list">
                        <li class="lnb-item">
                            <button type="button" class="lnb-btn lnb-toggle" aria-controls="lnbmenu-gbjkpo6"
                                aria-expanded="false">2Depth-menu</button>
                            <!-- lnb-submenu -->
                            <div class="lnb-submenu">
                                <ul id="lnbmenu-gbjkpo6">
                                    <li class="lnb-subitem">
                                        <button type="button" class="lnb-btn lnb-toggle-popup"
                                            aria-controls="lnbmenu-q50zs38" aria-expanded="false"
                                            aria-haspopup="true">3Depth-menu</button>
                                        <!-- lnb-submenu-lv2 -->
                                        <div class="lnb-submenu-lv2" id="lnbmenu-q50zs38">
                                            <button type="button" class="lnb-btn-tit">3Depth-title</button>
                                            <ul>
                                                <li><a href="#" class="lnb-btn">4Depth</a></li>
                                                <li><a href="#" class="lnb-btn">4Depth</a></li>
                                                <li><a href="#" class="lnb-btn">4Depth</a></li>
                                                <li><a href="#" class="lnb-btn">4Depth</a></li>
                                                <li><a href="#" class="lnb-btn">4Depth</a></li>
                                            </ul>
                                        </div>
                                        <!-- //lnb-submenu-lv2 -->
                                    </li>
                                    <li class="lnb-subitem"><a href="#" class="lnb-btn lnb-link">3Depth-link</a></li>
                                    <li class="lnb-subitem"><a href="./sample_sub_02.html"
                                            class="lnb-btn lnb-link">3Depth-link</a></li>
                                </ul>
                            </div>
                            <!-- //lnb-submenu -->
                        </li>
                        <li class="lnb-item">
                            <button type="button" class="lnb-btn lnb-toggle" aria-controls="lnbmenu-enuuwvl"
                                aria-expanded="false">2Depth-menu</button>
                            <!-- lnb-submenu -->
                            <div class="lnb-submenu">
                                <ul id="lnbmenu-enuuwvl">
                                    <li class="lnb-subitem">
                                        <button type="button" class="lnb-btn lnb-toggle-popup"
                                            aria-controls="lnbmenu-44ejvxa" aria-expanded="false"
                                            aria-haspopup="true">3Depth-menu</button>
                                        <!-- lnb-submenu-lv2 -->
                                        <div class="lnb-submenu-lv2" id="lnbmenu-44ejvxa">
                                            <button type="button" class="lnb-btn-tit">3Depth-title</button>
                                            <ul>
                                                <li><a href="#" class="lnb-btn">4Depth</a></li>
                                                <li><a href="#" class="lnb-btn">4Depth</a></li>
                                                <li><a href="#" class="lnb-btn">4Depth</a></li>
                                            </ul>
                                        </div>
                                        <!-- //lnb-submenu-lv2 -->
                                    </li>
                                    <li class="lnb-subitem"><a href="#" class="lnb-btn lnb-link">3Depth-link</a></li>
                                    <li class="lnb-subitem"><a href="#" class="lnb-btn lnb-link">3Depth-link</a></li>
                                </ul>
                            </div>
                            <!-- //lnb-submenu -->
                        </li>
                        <li class="lnb-item">
                            <button type="button" class="lnb-btn lnb-toggle" aria-controls="lnbmenu-vf9gqcy"
                                aria-expanded="false">2Depth-menu</button>
                            <!-- lnb-submenu -->
                            <div class="lnb-submenu">
                                <ul id="lnbmenu-vf9gqcy">
                                    <li class="lnb-subitem">
                                        <button type="button" class="lnb-btn lnb-toggle-popup"
                                            aria-controls="lnbmenu-jcuzvp6" aria-expanded="false"
                                            aria-haspopup="true">3Depth-menu</button>
                                        <!-- lnb-submenu-lv2 -->
                                        <div class="lnb-submenu-lv2" id="lnbmenu-jcuzvp6">
                                            <button type="button" class="lnb-btn-tit">3Depth-title</button>
                                            <ul>
                                                <li><a href="#" class="lnb-btn">4Depth</a></li>
                                                <li><a href="#" class="lnb-btn">4Depth</a></li>
                                                <li><a href="#" class="lnb-btn">4Depth</a></li>
                                            </ul>
                                        </div>
                                        <!-- //lnb-submenu-lv2 -->
                                    </li>
                                    <li class="lnb-subitem"><a href="#" class="lnb-btn lnb-link">3Depth-link</a></li>
                                    <li class="lnb-subitem"><a href="#" class="lnb-btn lnb-link">3Depth-link</a></li>
                                </ul>
                            </div>
                            <!-- //lnb-submenu -->
                        </li>
                    </ul>
                    <!-- //lnb-list -->
                </nav>
                <!-- //사이드 메뉴 -->

                <div class="contents">
                    <!-- breadcrumb -->
                    <nav class="krds-breadcrumb-wrap align-items-center" aria-label="현재 경로" id="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="home"><a href="#" class="txt"><span class="sr-only">홈</span></a></li>
                            <li><a href="#;" class="txt">1:1문의</a></li>
                        </ol>


                    </nav>
                    <!-- breadcrumb -->
                    <!-- 페이지 타이틀 영역 -->
                    <div class="page-title-wrap" data-type="responsive">
                        <h1 class="h-tit">1:1문의</h1>
                                                <ol class="breadcrumb-action">
                            <li>
                                <button class="icon-bg-round" onclick="window.print(); return false;">
                                    <i class="svg-icon ico-print"></i>
                                    <span class="sr-only">print</span>
                                </button>
                            </li>
                        </ol>
                    </div>
                    <!-- //페이지 타이틀 영역 -->


                    <div class="board-detailed pageWrap">

                        <script>
                            // 폼 제출/유효성 검사
                            function handleSubmit() {
                                const requiredFields = [
                                    { id: 'writer', msg: '작성자를 입력해주세요.' },
                                    { id: 'email-id', msg: '이메일 아이디를 입력해주세요.' },
                                    { id: 'email-domain', msg: '이메일 도메인을 입력해주세요.' },
                                    { id: 'phone-mid', msg: '연락처 입력해주세요.' },
                                    { id: 'phone-last', msg: '연락처 입력해주세요.' },
                                    { id: 'title', msg: '제목을 입력해주세요.' },
                                    { id: 'content', msg: '내용을 입력해주세요.' },
                                ];

                                let isValid = true;
                                let firstInvalidEl = null;

                                requiredFields.forEach(field => {
                                    const input = document.getElementById(field.id);
                                    if (!input) return;

                                    const value = input.value.trim();

                                    // form-group 내의 form-conts를 기준으로 감싸는 div 탐색
                                    const formGroup = input.closest('.form-group');
                                    const hint = formGroup?.querySelector('.form-hint-invalid');
                                    const wrap = hint?.closest('.form-conts');

                                    if (value === '') {
                                        if (wrap) wrap.classList.add('is-error');
                                        if (hint) {
                                            hint.textContent = field.msg;
                                            hint.style.display = 'flex';
                                        }
                                        if (!firstInvalidEl) firstInvalidEl = input;
                                        isValid = false;
                                    } else {
                                        if (wrap) wrap.classList.remove('is-error');
                                        if (hint) hint.style.display = 'none';
                                    }
                                });

                                if (!isValid && firstInvalidEl) {
                                    firstInvalidEl.focus();
                                } else {
                                    document.querySelector('form').submit();
                                }
                            }
                        </script>



                        <form action="">
                            <div class="page-content">
                                <p class="guide-p">임금, 부당해고, 수당산정 등 노무상담은 노무상담하기 코너를 이용하시기 바랍니다.</p>
                                <div class="guide-txt">
                                    <h2 class="guide-txt-title">문의하기 전에</h2>
                                    <p class="mb30">작성하신 상담글에 대한 답변은 <a href="#" class="bold">중앙회 홈페이지→마이페이지→활동이력→1:1문의
                                            답변확인</a> 에서 확인 가능합니다.</p>
                                    <ul class="guide-list">
                                        <li>등록된 메일주소로는 답변내용이 발송되지 않는 점 안내 드립니다.</li>
                                        <li>비방, 욕설, 광고 글이나 허위 또는 저속한 내용 등은 사전 통보 없이 삭제될 수 있습니다.</li>
                                        <li>평일16시 이후 접수 건은 익일 오전 9시부터 순차적으로 답변이 가능합니다.(주말/공휴일 제외)</li>
                                    </ul>
                                </div>


                                <div class="form-list form-list-margin">
                                    <fieldset class="fieldset">
                                        <!-- 폼그룹 -->
                                        <div class="form-group">
                                            <div class="form-tit">
                                                <label for="">분류</label>
                                            </div>
                                            <div class="form-conts">
                                                <select id="" class="krds-form-select medium" title="선택">
                                                    <option value="">선택</option>
                                                    <option value="">분류</option>
                                                    <option value="">분류</option>
                                                </select>
                                            </div>
                                        </div>
                                        <!-- //폼그룹 -->

                                        <!-- 폼그룹 -->
                                        <div class="form-group">
                                            <div class="form-tit">
                                                <label for="">작성자<i class="req">*</i></label>
                                            </div>
                                            <div class="form-conts btn-ico-wrap" data-delete="true">
                                                <input type="text" id="writer" class="krds-input medium"
                                                    placeholder="작성자를 입력하세요.">
                                                <p class="form-hint-invalid" style="display: none;">작성자를 입력해주세요.</p>
                                            </div>
                                        </div>
                                        <!-- //폼그룹 -->

                                        <!-- 폼그룹 -->
                                        <div class="form-group">
                                            <div class="form-tit">
                                                <label for="">이메일</label>
                                            </div>
                                            <div class="form-conts">
                                                <ul class="input-group range">
                                                    <li>
                                                        <input type="text" id="email-id" class="krds-input medium"
                                                            placeholder="">

                                                    </li>
                                                    <li class="mark">@</li>
                                                    <li>
                                                        <input type="text" id="email-domain" class="krds-input medium"
                                                            placeholder="" data-role="email-domain" readonly>
                                                    </li>
                                                    <li>
                                                        <select name="" id="" class="krds-form-select medium"
                                                            onchange="handleEmailDomainChange(this)">
                                                            <option value="">선택</option>
                                                            <option value="custom">직접입력</option>
                                                            <option value="naver.com">네이버</option>
                                                            <option value="daum.net">다음</option>
                                                        </select>
                                                    </li>
                                                </ul>
                                               
                                            </div>
                                        </div>
                                        <script>

                                        </script>
                                        <!-- //폼그룹 -->
                                        <!-- 폼그룹 -->
                                        <div class="form-group">
                                            <div class="form-tit">
                                                <label for="">연락처<i class="req">*</i></label>
                                            </div>
                                            <div class="form-conts">

                                                <ul class="input-group range">
                                                    <li>
                                                        <select name="" id="" class="krds-form-select medium">
                                                            <option value="">선택</option>
                                                            <option value="010">010</option>
                                                            <option value="011">011</option>
                                                        </select>

                                                    </li>
                                                    <li class="mark">-</li>
                                                    <li>

                                                        <input type="text" id="phone-mid" class="krds-input medium"
                                                            placeholder="" maxlength="4">

                                                    </li>
                                                    <li class="mark">-</li>
                                                    <li>

                                                        <input type="text" id="phone-last" class="krds-input medium"
                                                            placeholder="" maxlength="4">

                                                    </li>

                                                </ul>
                                                <p class="form-hint-invalid" style="display: none;">연락처를 입력해주세요ㅗ</p>
                                            </div>
                                        </div>
                                        <!-- //폼그룹 -->


                                        <div class="form-group">
                                            <div class="form-tit">
                                                <label for="">제목<i class="req">*</i></label>
                                            </div>
                                            <div class="form-conts">
                                                <input type="text" id="title" class="krds-input medium" placeholder="">
                                                <p class="form-hint-invalid" style="display: none;">제목을 입력해주세요</p>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="form-tit">
                                                <label for="">내용</label>
                                            </div>
                                            <div class="form-conts">
                                                <textarea name="" id="content" class="krds-input"
                                                    oninput="updateTextareaCount(this)"></textarea>
                                                <p class="form-hint-invalid" style="display: none;">내용을 입력해주세요</p>
                                                <input type="file" id="q_file_input" multiple style="display:none;"
                                                    onchange="handleFileSelect(this)" />
                                                <p class="textarea-count">
                                                    <span class="count-now">0</span><span
                                                        class="count-total">/3000</span>
                                                </p>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="form-tit">
                                                <label for="">파일첨부</label>
                                            </div>
                                            <div class="form-conts">
                                                <button type="button" class="krds-btn black medium" id=""
                                                    onclick="openFileDialog(this)">파일선택</button>
                                                <p class="form-hint">파일 최대 10MB / 전체 파일 최대 50MB</p>
                                            </div>
                                        </div>


                                    </fieldset>

                                </div>



                                <div class="detailed-file-wrap">
                                    <div class="tit">첨부파일목록</div>
                                    <ul class="list">
                                    </ul>
                                </div>

                            </div>


                            <div class="btnList-sort center">
                                <button type="button" class="krds-btn medium tertiary">목록</button>
                                <button type="button" class="krds-btn medium black" onclick="handleSubmit()">등록</button>
                            </div>
                        </form>
                    </div>

                </div>

                <script>
                    $(document).ready(function () {
                        // 전역 파일 배열
                        const uploadedFiles = [];

                        // 이메일 도메인 자동 입력
                        window.handleEmailDomainChange = function (selectEl) {
                            const $select = $(selectEl);
                            const $domainInput = $select.closest("ul").find('[data-role="email-domain"]');
                            const selectedValue = $select.val();

                            if (selectedValue === "") {
                                $domainInput.val("").prop("readonly", false);
                            } else if (selectedValue === "custom") {
                                $domainInput.val("").prop("readonly", false).focus();
                            } else {
                                $domainInput.val(selectedValue).prop("readonly", true);
                            }
                        };

                        // textarea 글자 수 카운트 (최대 3000자)
                        window.updateTextareaCount = function (textareaEl) {
                            const $textarea = $(textareaEl);
                            const $countNowEl = $textarea.closest('.form-conts').find('.count-now');
                            if (!$countNowEl.length) return;

                            let value = $textarea.val();
                            if (value.length > 3000) {
                                value = value.substring(0, 3000);
                                $textarea.val(value);
                            }
                            $countNowEl.text(value.length);
                        };

                        // 파일 확장자 구분용 클래스 반환
                        window.getFileTypeClass = function (fileName) {
                            const ext = fileName.split('.').pop().toLowerCase();
                            const imageExts = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp'];
                            const docExts = ['pdf', 'hwp', 'doc', 'docx', 'ppt', 'pptx', 'xls', 'xlsx', 'txt', 'zip'];

                            if (imageExts.includes(ext)) return 'file-img';
                            if (docExts.includes(ext)) return 'file-doc';
                            return 'file-etc';
                        };

                        // 파일 선택 창 열기
                        window.openFileDialog = function () {
                            $('#q_file_input').click();
                        };

                        // 파일 선택 후 첨부 목록 출력
                        window.handleFileSelect = function (inputEl) {
                            const newFiles = Array.from(inputEl.files);
                            const $fileList = $('.detailed-file-wrap .list');
                            if (!$fileList.length) return;

                            newFiles.forEach(file => {
                                const uniqueId = Date.now() + Math.random().toString(36).substr(2, 9);
                                uploadedFiles.push({ id: uniqueId, file });

                                const sizeKB = Math.round(file.size / 1024);
                                const fileTypeClass = getFileTypeClass(file.name);

                                const $li = $(`
                                    <li data-id="${uniqueId}">
                                        <a href="#" class="${fileTypeClass}" title="파일첨부">
                                            <p>${file.name}</p>
                                            <span>(${sizeKB}KB)</span>
                                        </a>
                                        <button type="button" class="krds-btn tertiary fileBtn" data-id="${uniqueId}">
                                            삭제<i class="svg-icon ico-delete-fill"></i>
                                        </button>
                                    </li>
                                `);

                                $fileList.append($li);
                            });

                            $(inputEl).val(''); // 동일 파일 다시 첨부 가능하도록 초기화
                        };

                        // 첨부 파일 삭제 (동적 요소 대응)
                        $(document).on("click", ".fileBtn", function () {
                            const fileId = $(this).data("id");
                            const index = uploadedFiles.findIndex(f => f.id === fileId);
                            if (index > -1) uploadedFiles.splice(index, 1);
                            $(this).closest("li").remove();
                        });
                    });
                </script>




            </div>
            <!-- //컨텐츠 영역 -->
        </div>
        <!-- //컨테이너 영역 -->

        <!-- 퍼블리싱단 footer는 여기로 바로 삽입됨 -->

    </div>

</body>

</html>



<script>

    // 퍼블리싱 단에만 사용하는 공통 스크립트
    // 개발에서는 절대 사용하지 말것!

    document.addEventListener("DOMContentLoaded", function () {
        loadHTML("../pages/common/header_pubSample.html", "beforebegin");
        loadHTML("../pages/common/footer_pubSample.html", "afterend");
    });

    function loadHTML(url, position) {
        fetch(url)
            .then((response) => {
                if (response.ok) {
                    return response.text();
                } else {
                    console.error(`Failed to load ${url}: ${response.status}`);
                    return "";
                }
            })
            .then((html) => {
                if (position === "beforebegin") {
                    document.body.insertAdjacentHTML("afterbegin", html);
                    initializeCommonScripts();
                } else if (position === "afterend") {
                    document.body.insertAdjacentHTML("beforeend", html);
                }
            })
            .catch((error) => console.error("Error loading HTML:", error));
    }

    function initializeCommonScripts() {
        // 메뉴 스크립트 초기화
        if (typeof krds_mainMenuPC !== "undefined") krds_mainMenuPC.init();
        if (typeof krds_mainMenuMobile !== "undefined") krds_mainMenuMobile.init();
        if (typeof krds_modal !== "undefined") krds_modal.init();
        if (typeof scrollManager !== "undefined") {
            window.addEventListener("scroll", () => {
                scrollManager.updateScrollValues();
                scrollManager.handleScrollDirection();
            });
        }
    }
</script>